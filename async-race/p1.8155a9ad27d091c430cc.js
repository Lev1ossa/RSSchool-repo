(()=>{"use strict";var e={711:(e,t,n)=>{n.r(t)},307:(e,t,n)=>{n.r(t)},522:(e,t,n)=>{n.r(t)},483:(e,t,n)=>{n.r(t)},601:(e,t,n)=>{n.r(t)},729:(e,t,n)=>{n.r(t)},175:(e,t,n)=>{n.r(t)},915:(e,t,n)=>{n.r(t)},576:(e,t,n)=>{n.r(t)},477:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=n(73),a=n(266),s=n(232),o=n(355),i=n(957);t.App=class{constructor(){this.gameListener=new EventTarget,this.createAppView()}createAppView(){const e=new o.HeaderView(this.gameListener),t=new i.MainView(this.gameListener),n=new s.FooterView;document.body.append(e.getElement(),t.getElement(),n.getElement())}createDialogView(){const e=new r.ElementCreator(a.dialogProps),t=new r.ElementCreator(a.formDialogProps),n=new r.ElementCreator(a.dialogBlockProps),s=new r.ElementCreator(a.menuProps),o=new r.ElementCreator(a.closeButtonProps);o.setElementAttributes([{attribute:"type",value:"reset"}]),t.setElementAttributes([{attribute:"method",value:"dialog"}]),s.addElement(o.getElement()),t.addElement(n.getElement()),t.addElement(s.getElement()),e.addElement(t.getElement()),document.body.append(e.getElement())}}},654:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.gameData=t.carModels=t.carBrands=t.carEngineStatuses=t.path=t.requestUrl=void 0,t.requestUrl="http://localhost:3000",t.path={garage:"/garage",engine:"/engine",winners:"/winners"},t.carEngineStatuses={start:"started",stop:"stopped",drive:"drive"},t.carBrands=["Porsche","Lamborgini","Ferrari","Maserati","Lotus","Dodge","Tesla","BMW","Mercedes","Ford"],t.carModels=["Diablo","Enzo","911s","GranTurizmo","Elise","Viper","ModelX","M6","SLR","Mustang"],t.gameData={currentPage:1,selectedCarID:0,selectedCarName:"",selectedCarColor:"#000000",numberOfRandomCars:100,carLength:60}},85:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createRandomCars=t.getRandomCarColor=t.getRandomCarName=void 0;const a=n(654),s=n(821);t.getRandomCarName=()=>`${a.carBrands[Math.floor(Math.random()*a.carBrands.length)]} ${a.carModels[Math.floor(Math.random()*a.carModels.length)]}`,t.getRandomCarColor=()=>{let e="";for(let t=0;t<6;t+=1)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return`#${e}`},t.createRandomCars=()=>r(void 0,void 0,void 0,(function*(){const e=new Array(100).fill("").map((()=>(0,s.createCar)((0,t.getRandomCarName)(),(0,t.getRandomCarColor)())));Promise.all(e).then((()=>{}),(e=>{throw new Error(e)}))}))},73:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ElementCreator=void 0,t.ElementCreator=class{constructor(e){const{tag:t,classes:n,textContent:r,listeners:a}=e;this.element=this.createElement(t),this.setTextContent(r),this.setCssClasses(n),a&&this.addListeners(a)}createElement(e){return document.createElement(e)}getElement(){return this.element}setElementAttributes(e){e.forEach((e=>this.element.setAttribute(e.attribute,e.value)))}setTextContent(e){this.element.textContent=e}setCssClasses(e){e.forEach((e=>{e&&this.element.classList.add(e)}))}addListeners(e){Object.entries(e).forEach((([e,t])=>{this.element.addEventListener(e,t)}))}addElement(e){e&&this.element.append(e)}removeChildren(){for(;this.element.firstChild;)this.element.firstChild.remove()}}},266:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.winnersProps=t.raceRoadFlagProps=t.raceRoadCarProps=t.raceRoadStopButtonProps=t.raceRoadStartButtonProps=t.raceTrackRoadProps=t.raceTrackCarNameProps=t.raceTrackButtonDeleteProps=t.raceTrackButtonSelectProps=t.raceSubtitleProps=t.raceTitleProps=t.buttonGenerateCarsProps=t.buttonResetProps=t.buttonRaceProps=t.InputElementCreatorUpdateProps=t.buttonUpdateProps=t.inputColorUpdateProps=t.inputNameUpdateProps=t.inputBlockUpdateProps=t.InputElementCreatorCreateProps=t.buttonCreateProps=t.inputColorCreateProps=t.inputNameCreateProps=t.inputBlockCreateProps=t.raceTrackProps=t.raceProps=t.controlPanelProps=t.garageProps=t.mainProps=t.closeButtonProps=t.menuProps=t.dialogBlockProps=t.formDialogProps=t.dialogProps=t.rsSchoolLinkProps=t.rsSchoolProps=t.thisYearProps=t.githubLinkProps=t.githubProps=t.footerProps=t.winnersButtonProps=t.garageButtonProps=t.headerProps=void 0,t.headerProps={tag:"div",classes:["header"],textContent:"",listeners:null},t.garageButtonProps={tag:"button",classes:["garage-button"],textContent:"To garage",listeners:null},t.winnersButtonProps={tag:"button",classes:["winners-button"],textContent:"To winners",listeners:null},t.footerProps={tag:"div",classes:["footer"],textContent:"",listeners:null},t.githubProps={tag:"div",classes:["github"],textContent:"",listeners:null},t.githubLinkProps={tag:"a",classes:["github-link"],textContent:"@Lev1ossa",listeners:null},t.thisYearProps={tag:"div",classes:["year"],textContent:"2023",listeners:null},t.rsSchoolProps={tag:"img",classes:["rsschool"],textContent:"",listeners:null},t.rsSchoolLinkProps={tag:"a",classes:["rsschool-link"],textContent:"",listeners:null},t.dialogProps={tag:"dialog",classes:["fav-dialog"],textContent:"",listeners:null},t.formDialogProps={tag:"form",classes:[],textContent:"",listeners:null},t.dialogBlockProps={tag:"div",classes:["fav-dialog-block"],textContent:"",listeners:null},t.menuProps={tag:"menu",classes:["fav-menu"],textContent:"",listeners:null},t.closeButtonProps={tag:"button",classes:["fav-close-button"],textContent:"Close",listeners:null},t.mainProps={tag:"div",classes:["main"],textContent:"",listeners:null},t.garageProps={tag:"div",classes:["garage"],textContent:"",listeners:null},t.controlPanelProps={tag:"div",classes:["control-panel"],textContent:"",listeners:null},t.raceProps={tag:"div",classes:["race"],textContent:"",listeners:null},t.raceTrackProps={tag:"div",classes:["race-track"],textContent:"",listeners:null},t.inputBlockCreateProps={tag:"div",classes:["input-block","input-block-create"],textContent:"",listeners:null},t.inputNameCreateProps={tag:"input",classes:["input-name","input-name-create"],textContent:"",listeners:null},t.inputColorCreateProps={tag:"input",classes:["input-color","input-color-create"],textContent:"",listeners:null},t.buttonCreateProps={tag:"button",classes:["input-button","button-create"],textContent:"",listeners:null},t.InputElementCreatorCreateProps={blockProps:t.inputBlockCreateProps,inputProps:t.inputNameCreateProps,inputColorProps:t.inputColorCreateProps,buttonProps:t.buttonCreateProps,buttonName:"Create"},t.inputBlockUpdateProps={tag:"div",classes:["input-block","input-block-update"],textContent:"",listeners:null},t.inputNameUpdateProps={tag:"input",classes:["input-name","input-name-update"],textContent:"",listeners:null},t.inputColorUpdateProps={tag:"input",classes:["input-color","input-color-update"],textContent:"",listeners:null},t.buttonUpdateProps={tag:"button",classes:["input-button","button-update"],textContent:"",listeners:null},t.InputElementCreatorUpdateProps={blockProps:t.inputBlockUpdateProps,inputProps:t.inputNameUpdateProps,inputColorProps:t.inputColorUpdateProps,buttonProps:t.buttonUpdateProps,buttonName:"Update"},t.buttonRaceProps={tag:"button",classes:["control-button","button-race"],textContent:"Race",listeners:null},t.buttonResetProps={tag:"button",classes:["control-button","button-reset"],textContent:"Reset",listeners:null},t.buttonGenerateCarsProps={tag:"button",classes:["control-button","button-generate-cars"],textContent:"Generate-cars",listeners:null},t.raceTitleProps={tag:"h1",classes:["race-title"],textContent:"Garage()",listeners:null},t.raceSubtitleProps={tag:"h2",classes:["race-subtitle"],textContent:"Page #",listeners:null},t.raceTrackButtonSelectProps={tag:"button",classes:["race-track-button-select"],textContent:"Select",listeners:null},t.raceTrackButtonDeleteProps={tag:"button",classes:["race-track-button-delete"],textContent:"Delete",listeners:null},t.raceTrackCarNameProps={tag:"span",classes:["race-track-car-name"],textContent:"Car name",listeners:null},t.raceTrackRoadProps={tag:"div",classes:["race-track-road"],textContent:"",listeners:null},t.raceRoadStartButtonProps={tag:"button",classes:["race-road-start-button"],textContent:"Start",listeners:null},t.raceRoadStopButtonProps={tag:"button",classes:["race-road-stop-button"],textContent:"Stop",listeners:null},t.raceRoadCarProps={tag:"svg",classes:["race-road-car"],textContent:"",listeners:null},t.raceRoadFlagProps={tag:"div",classes:["race-road-flag"],textContent:"",listeners:null},t.winnersProps={tag:"div",classes:["winners"],textContent:"",listeners:null}},828:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCarSvg=void 0,t.getCarSvg=e=>`<svg fill="${e}" width="60px" height="30px" viewBox="0 0 125 30" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="enable-background:new 0 0 122.88 35.03" xml:space="preserve" transform="rotate(0)matrix(-1, 0, 0, 1, 0, 0)">\n  <g id="SVGRepo_bgCarrier" stroke-width="0"/>\n  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>\n  <g id="SVGRepo_iconCarrier"> <style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style> <g> <path class="st0" d="M99.42,13.57c5.93,0,10.73,4.8,10.73,10.73c0,5.93-4.8,10.73-10.73,10.73s-10.73-4.8-10.73-10.73 C88.69,18.37,93.49,13.57,99.42,13.57L99.42,13.57z M79.05,5c-0.59,1.27-1.06,2.69-1.42,4.23c-0.82,2.57,0.39,3.11,3.19,2.06 c2.06-1.23,4.12-2.47,6.18-3.7c1.05-0.74,1.55-1.47,1.38-2.19c-0.34-1.42-3.08-2.16-5.33-2.6C80.19,2.23,80.39,2.11,79.05,5 L79.05,5z M23.86,19.31c2.75,0,4.99,2.23,4.99,4.99c0,2.75-2.23,4.99-4.99,4.99c-2.75,0-4.99-2.23-4.99-4.99 C18.87,21.54,21.1,19.31,23.86,19.31L23.86,19.31z M99.42,19.31c2.75,0,4.99,2.23,4.99,4.99c0,2.75-2.23,4.99-4.99,4.99 c-2.75,0-4.99-2.23-4.99-4.99C94.43,21.54,96.66,19.31,99.42,19.31L99.42,19.31z M46.14,12.5c2.77-2.97,5.97-4.9,9.67-6.76 c8.1-4.08,13.06-3.58,21.66-3.58l-2.89,7.5c-1.21,1.6-2.58,2.73-4.66,2.84H46.14L46.14,12.5z M23.86,13.57 c5.93,0,10.73,4.8,10.73,10.73c0,5.93-4.8,10.73-10.73,10.73s-10.73-4.8-10.73-10.73C13.13,18.37,17.93,13.57,23.86,13.57 L23.86,13.57z M40.82,10.3c3.52-2.19,7.35-4.15,11.59-5.82c12.91-5.09,22.78-6,36.32-1.9c4.08,1.55,8.16,3.1,12.24,4.06 c4.03,0.96,21.48,1.88,21.91,4.81l-4.31,5.15c1.57,1.36,2.85,3.03,3.32,5.64c-0.13,1.61-0.57,2.96-1.33,4.04 c-1.29,1.85-5.07,3.76-7.11,2.67c-0.65-0.35-1.02-1.05-1.01-2.24c0.06-23.9-28.79-21.18-26.62,2.82H35.48 C44.8,5.49,5.04,5.4,12.1,28.7C9.62,31.38,3.77,27.34,0,18.75c1.03-1.02,2.16-1.99,3.42-2.89c-0.06-0.05,0.06,0.19-0.15-0.17 c-0.21-0.36,0.51-1.87,1.99-2.74C13.02,8.4,31.73,8.52,40.82,10.3L40.82,10.3z"/> </g> </g>\n  </svg>`},881:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputElementCreator=void 0;const r=n(73);class a extends r.ElementCreator{constructor(e){const{blockProps:t,inputProps:n,inputColorProps:a,buttonProps:s,buttonName:o}=e;super(t),this.input=new r.ElementCreator(n),this.inputColor=new r.ElementCreator(a),this.button=new r.ElementCreator(s),this.constructView(o)}constructView(e){this.inputColor.setElementAttributes([{attribute:"type",value:"color"}]),this.button.element.innerText=e,this.getElement().append(this.input.getElement()),this.getElement().append(this.inputColor.getElement()),this.getElement().append(this.button.getElement())}}t.InputElementCreator=a},821:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.patchCarEngine=t.deleteCar=t.updateCar=t.createCar=t.getGarageData=void 0;const a=n(654);t.getGarageData=e=>r(void 0,void 0,void 0,(function*(){return fetch(`${a.requestUrl}${a.path.garage}?_page=${e}&_limit=7`).then((e=>e.json().then((t=>{const n=Number(e.headers.get("X-Total-Count"));return{cars:t,carsNumber:n,carsPagesNumber:Math.ceil(n/7)}}),(e=>{throw new Error(e)}))),(e=>{throw new Error(e)}))})),t.createCar=(e,t)=>r(void 0,void 0,void 0,(function*(){return fetch(`${a.requestUrl}${a.path.garage}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,color:t})}).then((e=>e.json().then((e=>e),(e=>{throw new Error(e)}))),(e=>{throw new Error(e)}))})),t.updateCar=(e,t,n)=>r(void 0,void 0,void 0,(function*(){return fetch(`${a.requestUrl}${a.path.garage}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,color:n})}).then((e=>e.json().then((e=>e),(e=>{throw new Error(e)}))),(e=>{throw new Error(e)}))})),t.deleteCar=e=>r(void 0,void 0,void 0,(function*(){fetch(`${a.requestUrl}${a.path.garage}/${e}`,{method:"DELETE"}).then((()=>{}),(e=>{throw new Error(e)}))})),t.patchCarEngine=(e,t)=>r(void 0,void 0,void 0,(function*(){return fetch(`${a.requestUrl}${a.path.engine}?id=${e}&status=${t}`,{method:"PATCH"}).then((t=>{const{status:n}=t;return t.json().then((t=>({engineProps:t,carId:e,status:n})),(e=>{const t=new Error(e);throw t.message="500",t}))}),(e=>{throw new Error(e)}))}))},718:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppView=void 0;const r=n(73);t.AppView=class{constructor(e){this.elementCreator=this.createView(e)}createView(e){return new r.ElementCreator(e)}getElement(){return this.elementCreator.getElement()}}},232:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FooterView=void 0;const r=n(73),a=n(266),s=n(718);n(711);class o extends s.AppView{constructor(){super(a.footerProps),this.constructView()}constructView(){const e=new r.ElementCreator(a.githubProps),t=new r.ElementCreator(a.githubLinkProps);t.setElementAttributes([{attribute:"href",value:"https://github.com/Lev1ossa"}]),e.addElement(t.getElement()),this.elementCreator.addElement(e.getElement());const n=new r.ElementCreator(a.thisYearProps);this.elementCreator.addElement(n.getElement());const s=new r.ElementCreator(a.rsSchoolProps);s.setElementAttributes([{attribute:"src",value:"https://rs.school/images/rs_school_js.svg"},{attribute:"alt",value:"RSS logo"}]);const o=new r.ElementCreator(a.rsSchoolLinkProps);o.setElementAttributes([{attribute:"href",value:"https://rs.school/js/"}]),o.addElement(s.getElement()),this.elementCreator.addElement(o.getElement())}}t.FooterView=o},355:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderView=void 0;const r=n(73),a=n(266),s=n(718);n(307);class o extends s.AppView{constructor(e){super(a.headerProps),this.gameListener=e,this.constructView()}constructView(){const e=new r.ElementCreator(a.garageButtonProps);e.addListeners({click:()=>this.gameListener.dispatchEvent(new CustomEvent("pageGarage"))});const t=new r.ElementCreator(a.winnersButtonProps);t.addListeners({click:()=>this.gameListener.dispatchEvent(new CustomEvent("pageWinners"))}),this.elementCreator.addElement(e.getElement()),this.elementCreator.addElement(t.getElement())}}t.HeaderView=o},867:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ControlPanelView=void 0;const r=n(85),a=n(73),s=n(266),o=n(881),i=n(821),l=n(718);n(522);class c extends l.AppView{constructor(e,t){super(s.controlPanelProps),this.gameData=e,this.gameListener=t,this.constructView()}constructView(){this.createInputCarCreate(),this.CreateInputCarUpdate();const e=new a.ElementCreator(s.buttonRaceProps);this.elementCreator.addElement(e.getElement());const t=new a.ElementCreator(s.buttonResetProps);this.elementCreator.addElement(t.getElement()),this.CreateButtonGenerateCars()}createInputCarCreate(){const e=new o.InputElementCreator(s.InputElementCreatorCreateProps);e.button.addListeners({click:()=>{const t=e.input.getElement(),n=e.inputColor.getElement(),r=t.value;r&&(0,i.createCar)(r,n.value).then((()=>{this.gameListener.dispatchEvent(new CustomEvent("carsUpdated")),t.value="",n.value="#000000"}),(()=>{}))}}),this.elementCreator.addElement(e.getElement())}CreateInputCarUpdate(){const e=new o.InputElementCreator(s.InputElementCreatorUpdateProps);e.button.addListeners({click:()=>{const t=e.input.getElement(),n=e.inputColor.getElement(),r=t.value,a=this.gameData.selectedCarID;r&&a&&(0,i.updateCar)(a,r,n.value).then((()=>{this.gameListener.dispatchEvent(new CustomEvent("carsUpdated")),this.gameData.selectedCarID=0,this.gameData.selectedCarName="",t.value="",n.value="#000000"}),(()=>{}))}}),this.gameListener.addEventListener("carSelected",(()=>{const t=e.input.getElement(),n=e.inputColor.getElement();t.value=this.gameData.selectedCarName,n.value=this.gameData.selectedCarColor})),this.elementCreator.addElement(e.getElement())}CreateButtonGenerateCars(){const e=new a.ElementCreator(s.buttonGenerateCarsProps);e.addListeners({click:()=>{(0,r.createRandomCars)().then((()=>{this.gameListener.dispatchEvent(new CustomEvent("carsUpdated"))}),(()=>{}))}}),this.elementCreator.addElement(e.getElement())}}t.ControlPanelView=c},111:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GarageView=void 0;const r=n(266),a=n(718),s=n(867);n(483);const o=n(878);class i extends a.AppView{constructor(e,t){super(r.garageProps),this.gameListener=t,this.gameData=e,this.raceView=new o.RaceView(this.gameData,this.gameListener),this.constructView()}constructView(){const e=new s.ControlPanelView(this.gameData,this.gameListener);this.elementCreator.addElement(e.getElement()),this.elementCreator.addElement(this.raceView.getElement()),this.redrawRaceView(),this.gameListener.addEventListener("carsUpdated",(()=>{this.redrawRaceView()}))}redrawRaceView(){const e=new o.RaceView(this.gameData,this.gameListener);this.raceView.getElement().replaceWith(e.getElement()),this.raceView=e}}t.GarageView=i},734:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RaceTrackView=void 0;const a=n(654),s=n(73),o=n(266),i=n(828),l=n(821),c=n(718);n(729);class u extends c.AppView{constructor(e,t,n){super(o.raceTrackProps),this.carData=e,this.buttonSelect=new s.ElementCreator(o.raceTrackButtonSelectProps),this.buttonDelete=new s.ElementCreator(o.raceTrackButtonDeleteProps),this.carNameTitle=new s.ElementCreator(o.raceTrackCarNameProps),this.road=new s.ElementCreator(o.raceTrackRoadProps),this.buttonStart=new s.ElementCreator(o.raceRoadStartButtonProps),this.buttonStop=new s.ElementCreator(o.raceRoadStopButtonProps),this.raceCar=new s.ElementCreator(o.raceRoadCarProps),this.raceFlag=new s.ElementCreator(o.raceRoadFlagProps),this.gameListener=t,this.gameData=n,this.constructView()}constructView(){this.raceCar.getElement().innerHTML=(0,i.getCarSvg)(this.carData.color),this.raceCar.element=this.raceCar.getElement().firstElementChild,this.carNameTitle.setTextContent(this.carData.name),this.createButtonSelect(),this.createButtonDelete(),this.elementCreator.addElement(this.carNameTitle.getElement()),this.createButtonStart(),this.createButtonStop(),this.road.addElement(this.raceCar.getElement()),this.road.addElement(this.raceFlag.getElement()),this.elementCreator.addElement(this.road.getElement())}createButtonSelect(){this.buttonSelect.addListeners({click:()=>{const{id:e,name:t,color:n}=this.carData;this.gameData.selectedCarID=e,this.gameData.selectedCarName=t,this.gameData.selectedCarColor=n,this.gameListener.dispatchEvent(new CustomEvent("carSelected"))}}),this.elementCreator.addElement(this.buttonSelect.getElement())}createButtonDelete(){this.buttonDelete.addListeners({click:()=>{(0,l.deleteCar)(this.carData.id).then((()=>{this.gameListener.dispatchEvent(new CustomEvent("carsUpdated"))}),(()=>{}))}}),this.elementCreator.addElement(this.buttonDelete.getElement())}createButtonStart(){this.buttonStart.addListeners({click:()=>{this.startCarEngine()}}),this.road.addElement(this.buttonStart.getElement())}createButtonStop(){this.buttonStop.addListeners({click:()=>{this.stopCarEngine()}}),this.road.addElement(this.buttonStop.getElement())}startCarEngine(){(0,l.patchCarEngine)(this.carData.id,a.carEngineStatuses.start).then((e=>{const t=e.engineProps.distance/e.engineProps.velocity;this.startCarAnimation(t),this.setCarEngineDriveMode().then((e=>dispatchEvent(new CustomEvent("carFinish",{detail:{carId:this.carData.id,carTime:e}}))),(()=>{}))}),(()=>{}))}stopCarEngine(){(0,l.patchCarEngine)(this.carData.id,a.carEngineStatuses.stop).then((()=>{this.gameListener.dispatchEvent(new CustomEvent("carStop",{detail:{carId:this.carData.id}})),this.stopCarAnimation()}),(()=>{}))}setCarEngineDriveMode(){return r(this,void 0,void 0,(function*(){return(0,l.patchCarEngine)(this.carData.id,a.carEngineStatuses.drive).then((e=>(500===e.status&&this.gameListener.dispatchEvent(new CustomEvent("carStop",{detail:{carId:this.carData.id}})),e.engineProps.distance/e.engineProps.velocity)),(e=>{"500"===e.message&&this.gameListener.dispatchEvent(new CustomEvent("carStop",{detail:{carId:this.carData.id}}))}))}))}startCarAnimation(e){const t=this.road.getElement().offsetWidth-this.gameData.carLength,n=e/t,r=this.raceCar.getElement();r.style.left="0px";let a=0;const s=setInterval((()=>{a<t&&(a+=1,r.style.left=`${a}px`)}),n);this.gameListener.addEventListener("carStop",(e=>{e.detail.carId===this.carData.id&&clearInterval(s)})),this.gameListener.addEventListener("allCarsStop",(()=>{clearInterval(s),r.style.left="0px"}),{once:!0})}stopCarAnimation(){this.gameListener.dispatchEvent(new CustomEvent("gameDataUpdated",{detail:{carId:this.carData.id}}))}}t.RaceTrackView=u},878:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RaceView=void 0;const a=n(73),s=n(266),o=n(821),i=n(718);n(601);const l=n(734);class c extends i.AppView{constructor(e,t){super(s.raceProps),this.gameListener=t,this.gameData=e,this.constructView()}constructView(){return r(this,void 0,void 0,(function*(){(0,o.getGarageData)(this.gameData.currentPage).then((e=>{if(e){const{cars:t,carsNumber:n}=e,r=new a.ElementCreator(s.raceTitleProps);r.setTextContent(`Garage(${n})`);const o=new a.ElementCreator(s.raceSubtitleProps);o.setTextContent(`Page #(${this.gameData.currentPage})`),this.elementCreator.addElement(r.getElement()),this.elementCreator.addElement(o.getElement()),t.forEach((e=>{const t=new l.RaceTrackView(e,this.gameListener,this.gameData);this.elementCreator.addElement(t.getElement())}))}}),(()=>{}))}))}}t.RaceView=c},957:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MainView=void 0;const r=n(654),a=n(266),s=n(718),o=n(111);n(175);const i=n(731);class l extends s.AppView{constructor(e){super(a.mainProps),this.gameData=r.gameData,this.gameListener=e,this.garage=new o.GarageView(this.gameData,this.gameListener),this.winners=new i.WinnersView,this.constructView(),this.setChangeViewListeners()}constructView(){this.elementCreator.addElement(this.garage.getElement())}setChangeViewListeners(){this.gameListener.addEventListener("pageGarage",(()=>{this.elementCreator.removeChildren(),this.elementCreator.addElement(this.garage.getElement())})),this.gameListener.addEventListener("pageWinners",(()=>{this.elementCreator.removeChildren(),this.elementCreator.addElement(this.winners.getElement())}))}}t.MainView=l},731:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersView=void 0;const r=n(266),a=n(718);n(915);class s extends a.AppView{constructor(){super(r.winnersProps),this.constructView()}constructView(){}}t.WinnersView=s}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(477);n(576),alert("Уважаемый проверяющий! Прошу не проверять работу в первый день и дать хотя бы 1 день на доработку. Спасибо!"),new e.App})()})();